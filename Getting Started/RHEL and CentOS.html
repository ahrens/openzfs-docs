
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>RHEL and CentOS &#8212; OpenZFS  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Ubuntu" href="Ubuntu/index.html" />
    <link rel="prev" title="Fedora" href="Fedora.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="rhel-and-centos">
<h1>RHEL and CentOS<a class="headerlink" href="#rhel-and-centos" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="http://elrepoproject.blogspot.com/2016/02/kabi-tracking-kmod-packages.html">kABI-tracking
kmod</a>
or
<a class="reference external" href="https://en.wikipedia.org/wiki/Dynamic_Kernel_Module_Support">DKMS</a>
style packages are provided for RHEL / CentOS based distributions from
the official zfsonlinux.org repository. These packages track the
official ZFS on Linux tags and are updated as new versions are released.
Packages are available for the following configurations:</p>
<div class="line-block">
<div class="line"><strong>EL Releases:</strong> 6.x, 7.x, 8.x</div>
<div class="line"><strong>Architectures:</strong> x86_64</div>
</div>
<p>To simplify installation a zfs-release package is provided which
includes a zfs.repo configuration file and the ZFS on Linux public
signing key. All official ZFS on Linux packages are signed using this
key, and by default yum will verify a package’s signature before
allowing it be to installed. Users are strongly encouraged to verify the
authenticity of the ZFS on Linux public key using the fingerprint listed
here.</p>
<div class="line-block">
<div class="line"><strong>Location:</strong> /etc/pki/rpm-gpg/RPM-GPG-KEY-zfsonlinux</div>
<div class="line"><strong>EL6 Package:</strong>
<a class="reference external" href="http://download.zfsonlinux.org/epel/zfs-release.el6.noarch.rpm">http://download.zfsonlinux.org/epel/zfs-release.el6.noarch.rpm</a></div>
<div class="line"><strong>EL7.5 Package:</strong>
<a class="reference external" href="http://download.zfsonlinux.org/epel/zfs-release.el7_5.noarch.rpm">http://download.zfsonlinux.org/epel/zfs-release.el7_5.noarch.rpm</a></div>
<div class="line"><strong>EL7.6 Package:</strong>
<a class="reference external" href="http://download.zfsonlinux.org/epel/zfs-release.el7_6.noarch.rpm">http://download.zfsonlinux.org/epel/zfs-release.el7_6.noarch.rpm</a></div>
<div class="line"><strong>EL7.7 Package:</strong>
<a class="reference external" href="http://download.zfsonlinux.org/epel/zfs-release.el7_7.noarch.rpm">http://download.zfsonlinux.org/epel/zfs-release.el7_7.noarch.rpm</a></div>
<div class="line"><strong>EL7.8 Package:</strong>
<a class="reference external" href="http://download.zfsonlinux.org/epel/zfs-release.el7_8.noarch.rpm">http://download.zfsonlinux.org/epel/zfs-release.el7_8.noarch.rpm</a></div>
<div class="line"><strong>EL8.0 Package:</strong>
<a class="reference external" href="http://download.zfsonlinux.org/epel/zfs-release.el8_0.noarch.rpm">http://download.zfsonlinux.org/epel/zfs-release.el8_0.noarch.rpm</a></div>
<div class="line"><strong>EL8.1 Package:</strong>
<a class="reference external" href="http://download.zfsonlinux.org/epel/zfs-release.el8_1.noarch.rpm">http://download.zfsonlinux.org/epel/zfs-release.el8_1.noarch.rpm</a></div>
<div class="line"><strong>Note:</strong> Starting with EL7.7 <strong>zfs-0.8</strong> will become the default,
EL7.6 and older will continue to track the <strong>zfs-0.7</strong> point releases.</div>
</div>
<div class="line-block">
<div class="line"><strong>Download from:</strong>
<a class="reference external" href="http://pgp.mit.edu/pks/lookup?search=0xF14AB620&amp;op=index&amp;fingerprint=on">pgp.mit.edu</a></div>
<div class="line"><strong>Fingerprint:</strong> C93A FFFD 9F3F 7B03 C310 CEB6 A9D5 A1C0 F14A B620</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo yum install http://download.zfsonlinux.org/epel/zfs-release.&lt;dist&gt;.noarch.rpm
$ gpg --quiet --with-fingerprint /etc/pki/rpm-gpg/RPM-GPG-KEY-zfsonlinux
pub  2048R/F14AB620 2013-03-21 ZFS on Linux &lt;zfs@zfsonlinux.org&gt;
    Key fingerprint = C93A FFFD 9F3F 7B03 C310  CEB6 A9D5 A1C0 F14A B620
    sub  2048R/99685629 2013-03-21
</pre></div>
</div>
<p>After installing the zfs-release package and verifying the public key
users can opt to install ether the kABI-tracking kmod or DKMS style
packages. For most users the kABI-tracking kmod packages are recommended
in order to avoid needing to rebuild ZFS for every kernel update. DKMS
packages are recommended for users running a non-distribution kernel or
for users who wish to apply local customizations to ZFS on Linux.</p>
<div class="section" id="kabi-tracking-kmod">
<h2>kABI-tracking kmod<a class="headerlink" href="#kabi-tracking-kmod" title="Permalink to this headline">¶</a></h2>
<p>By default the zfs-release package is configured to install DKMS style
packages so they will work with a wide range of kernels. In order to
install the kABI-tracking kmods the default repository in the
<em>/etc/yum.repos.d/zfs.repo</em> file must be switch from <em>zfs</em> to
<em>zfs-kmod</em>. Keep in mind that the kABI-tracking kmods are only verified
to work with the distribution provided kernel.</p>
<div class="code diff highlight-default notranslate"><div class="highlight"><pre><span></span># /etc/yum.repos.d/zfs.repo
 [zfs]
 name=ZFS on Linux for EL 7 - dkms
 baseurl=http://download.zfsonlinux.org/epel/7/$basearch/
-enabled=1
+enabled=0
 metadata_expire=7d
 gpgcheck=1
 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-zfsonlinux
@@ -9,7 +9,7 @@
 [zfs-kmod]
 name=ZFS on Linux for EL 7 - kmod
 baseurl=http://download.zfsonlinux.org/epel/7/kmod/$basearch/
-enabled=0
+enabled=1
 metadata_expire=7d
 gpgcheck=1
 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-zfsonlinux
</pre></div>
</div>
<p>The ZFS on Linux packages can now be installed using yum.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo yum install zfs
</pre></div>
</div>
</div>
<div class="section" id="dkms">
<h2>DKMS<a class="headerlink" href="#dkms" title="Permalink to this headline">¶</a></h2>
<p>To install DKMS style packages issue the following yum commands. First
add the <a class="reference external" href="https://fedoraproject.org/wiki/EPEL">EPEL repository</a> which
provides DKMS by installing the <em>epel-release</em> package, then the
<em>kernel-devel</em> and <em>zfs</em> packages. Note that it is important to make
sure that the matching <em>kernel-devel</em> package is installed for the
running kernel since DKMS requires it to build ZFS.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo yum install epel-release
$ sudo yum install &quot;kernel-devel-uname-r == $(uname -r)&quot; zfs
</pre></div>
</div>
</div>
<div class="section" id="important-notices">
<h2>Important Notices<a class="headerlink" href="#important-notices" title="Permalink to this headline">¶</a></h2>
<div class="section" id="rhel-centos-7-x-kmod-package-upgrade">
<span id="rhelcentos-7x-kmod-package-upgrade"></span><h3>RHEL/CentOS 7.x kmod package upgrade<a class="headerlink" href="#rhel-centos-7-x-kmod-package-upgrade" title="Permalink to this headline">¶</a></h3>
<p>When updating to a new RHEL/CentOS 7.x release the existing kmod
packages will not work due to upstream kABI changes in the kernel. After
upgrading to 7.x users must uninstall ZFS and then reinstall it as
described in the <a class="reference external" href="https://github.com/zfsonlinux/zfs/wiki/RHEL-%26-CentOS/#kabi-tracking-kmod">kABI-tracking
kmod</a>
section. Compatible kmod packages will be installed from the matching
CentOS 7.x repository.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo yum remove zfs zfs-kmod spl spl-kmod libzfs2 libnvpair1 libuutil1 libzpool2 zfs-release
$ sudo yum install http://download.zfsonlinux.org/epel/zfs-release.el7_6.noarch.rpm
$ sudo yum autoremove
$ sudo yum clean metadata
$ sudo yum install zfs
</pre></div>
</div>
</div>
<div class="section" id="switching-from-dkms-to-kabi-tracking-kmod">
<h3>Switching from DKMS to kABI-tracking kmod<a class="headerlink" href="#switching-from-dkms-to-kabi-tracking-kmod" title="Permalink to this headline">¶</a></h3>
<p>When switching from DKMS to kABI-tracking kmods first uninstall the
existing DKMS packages. This should remove the kernel modules for all
installed kernels but in practice it’s not always perfectly reliable.
Therefore, it’s recommended that you manually remove any remaining ZFS
kernel modules as shown. At this point the kABI-tracking kmods can be
installed as described in the section above.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo yum remove zfs zfs-kmod spl spl-kmod libzfs2 libnvpair1 libuutil1 libzpool2 zfs-release

$ sudo find /lib/modules/ \( -name &quot;splat.ko&quot; -or -name &quot;zcommon.ko&quot; \
-or -name &quot;zpios.ko&quot; -or -name &quot;spl.ko&quot; -or -name &quot;zavl.ko&quot; -or \
-name &quot;zfs.ko&quot; -or -name &quot;znvpair.ko&quot; -or -name &quot;zunicode.ko&quot; \) \
-exec /bin/rm {} \;
</pre></div>
</div>
</div>
</div>
<div class="section" id="testing-repositories">
<h2>Testing Repositories<a class="headerlink" href="#testing-repositories" title="Permalink to this headline">¶</a></h2>
<p>In addition to the primary <em>zfs</em> repository a <em>zfs-testing</em> repository
is available. This repository, which is disabled by default, contains
the latest version of ZFS on Linux which is under active development.
These packages are made available in order to get feedback from users
regarding the functionality and stability of upcoming releases. These
packages <strong>should not</strong> be used on production systems. Packages from the
testing repository can be installed as follows.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo yum --enablerepo=zfs-testing install kernel-devel zfs
</pre></div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static//img/320px-Open-ZFS-Secondary-Logo-Colour-halfsize.png" alt="Logo"/>
    
  </a>
</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Getting Started</a><ul class="current">
<li class="toctree-l2"><a class="reference external" href="https://wiki.archlinux.org/index.php/ZFS">ArchLinux</a></li>
<li class="toctree-l2"><a class="reference internal" href="Debian/index.html">Debian</a></li>
<li class="toctree-l2"><a class="reference internal" href="Fedora.html">Fedora</a></li>
<li class="toctree-l2"><a class="reference external" href="https://zfsonfreebsd.github.io/ZoF/">FreeBSD</a></li>
<li class="toctree-l2"><a class="reference external" href="https://wiki.gentoo.org/wiki/ZFS">Gentoo</a></li>
<li class="toctree-l2"><a class="reference external" href="https://software.opensuse.org/package/zfs">openSUSE</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">RHEL and CentOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="Ubuntu/index.html">Ubuntu</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Project and Community/index.html">Project and Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Developer Resources/index.html">Developer Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Performance and tuning/index.html">Performance and tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Basics concepts/index.html">Basic concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../License.html">License</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Getting Started</a><ul>
      <li>Previous: <a href="Fedora.html" title="previous chapter">Fedora</a></li>
      <li>Next: <a href="Ubuntu/index.html" title="next chapter">Ubuntu</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, OpenZFS.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/Getting Started/RHEL and CentOS.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>